<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='utf-8'/>
    <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.6/index.global.min.js'></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>

        var calendar;

        var selectedUserIdx = 0;
        var users = ["Sergio", "Oleg", "Sasha", "Stas", "Nikita", "Dima", "Vlad", "Maksim", "Lera", "Nastya"];

        function switchUser(forward = true) {
            selectedUserIdx = (selectedUserIdx + (forward ? 1 : -1) + users.length) % users.length;
            var customButtonsOption = calendar.getOption('customButtons');
            calendar.setOption("customButtons", {
                ...customButtonsOption,
                selectedUser: {
                    ...customButtonsOption.selectedUser,
                    text: users[selectedUserIdx]
                }
            });
        }

        document.addEventListener('DOMContentLoaded', function () {
            var Calendar = FullCalendar.Calendar;

            var calendarEl = document.getElementById('calendar');

            calendar = new Calendar(calendarEl, {
                firstDay: 1,
                themeSystem: 'standard',
                eventDurationEditable: false,
                customButtons: {
                    selectedUser: {
                        text: users[selectedUserIdx]
                    },
                    prevUser: {
                        icon: 'chevron-left',
                        click: function () {
                            switchUser(false);
                        }
                    },
                    nextUser: {
                        icon: 'chevron-right',
                        click: function () {
                            switchUser();
                        }
                    }
                },
                headerToolbar: {
                    left: 'prev,next',
                    center: 'title',
                    right: 'prevUser,selectedUser,nextUser'
                },
                editable: false,
                dateClick: function (info) {
                    calendar.addEvent({
                        title: users[selectedUserIdx],
                        start: info.dateStr
                    });
                },
                eventClick: function (eventClickInfo) {
                    if (eventClickInfo.event.title === users[selectedUserIdx]) {
                        eventClickInfo.event.remove();
                    }
                }
            });

            calendar.render();
        });

    </script>

    <style>
        html, body {
            margin: 0;
            padding: 0;
            font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
            background-color: #f5f5f5;
        }

        #calendar-container {
            position: relative;
            z-index: 1;
        }

        #calendar {
            max-width: 1100px;
            margin: 20px auto;
        }

        #calendar .fc-day-sun, #calendar .fc-day-sat {
            background-color: #f4f5d7;
        }
    </style>
</head>
<body>
<div id='calendar-container'>
    <div id='calendar'></div>
</div>
</body>
</html>